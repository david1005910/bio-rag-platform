# Bio-RAG Specification (기능 명세서)

> 이 문서는 Bio-RAG 플랫폼의 기능 요구사항, 사용자 스토리, 수용 기준을 정의합니다.
> Constitution을 기반으로 작성되었으며, 기술 구현 전에 "무엇을" 만들지 명확히 합니다.

---

## 1. Feature Overview (기능 개요)

### 1.1 프로젝트명
**Bio-RAG** (Biomedical Research AI-Guided Analytics)

### 1.2 한 줄 설명
바이오 연구자를 위한 AI 기반 논문 분석 및 인사이트 도출 플랫폼

### 1.3 핵심 목표
| 목표 | 측정 지표 | 목표값 |
|------|----------|--------|
| 논문 검색 시간 단축 | 검색 → 결과 시간 | 70% 감소 |
| 연구 트렌드 파악 | 트렌드 분석 시간 | 80% 감소 |
| 관련 논문 발견 | 관련 논문 발견율 | 200% 향상 |

---

## 2. Target Users (타겟 사용자)

### 2.1 Primary Users (주요 사용자)

#### 페르소나 1: 박사과정 연구원
```
이름: 김연구 (29세)
직업: 생명과학 박사과정 연구원
전문 분야: CAR-T 세포치료

목표:
- 최신 논문 리뷰 시간 단축
- 유사 연구 자동 발견
- 연구 트렌드 파악

페인 포인트:
- 주당 100편 이상 논문 스크리닝
- 관련성 판단의 어려움
- 시간 부족으로 중요 논문 누락

니즈:
- 빠른 논문 요약
- AI 기반 질의응답
- 맞춤형 논문 추천
```

#### 페르소나 2: 제약회사 R&D 책임자
```
이름: 이팀장 (42세)
직업: 제약회사 R&D 팀장
전문 분야: 신약 개발

목표:
- 경쟁사 연구 동향 파악
- 신약 타겟 발굴
- 팀 연구 방향 설정

페인 포인트:
- 시장 트렌드 분석에 주당 10시간 소요
- 팀원들과 정보 공유 어려움
- 최신 동향 실시간 파악 불가

니즈:
- 트렌드 대시보드
- 키워드 알림 기능
- 팀 협업 기능
```

### 2.2 Secondary Users (부차적 사용자)
- 과학 저널리스트
- 보건의료 정책 입안자
- 바이오 섹터 투자자

---

## 3. User Stories (사용자 스토리)

### US-001: AI 논문 Q&A (챗봇)
```
AS A 바이오 연구원
I WANT TO 자연어로 특정 주제에 대해 질문하고
SO THAT 관련 논문 기반의 정확한 답변을 빠르게 얻을 수 있다

Acceptance Criteria (수용 기준):
☐ 자연어 질문 입력 시 관련 논문 기반 답변 생성
☐ 답변에 출처 논문 3개 이상 명시 (PMID 링크 포함)
☐ 평균 응답 시간 2초 이내, 최대 5초
☐ 할루시네이션 검증 메커니즘 적용
☐ 대화 히스토리 유지 (세션당 최대 10턴)
☐ "정보를 찾을 수 없음" 응답 처리

Priority: P0 (Must-Have)
Release: V1.0
```

### US-002: 의미 기반 논문 검색
```
AS A 연구원
I WANT TO 키워드가 정확히 매칭되지 않아도 의미적으로 유사한 논문을 검색하고
SO THAT 관련 연구를 놓치지 않고 찾을 수 있다

Acceptance Criteria:
☐ 자연어 검색 쿼리 지원 (예: "암 면역치료의 부작용")
☐ Top-10 관련 논문 반환
☐ 각 논문에 관련도 점수 표시 (0-100%)
☐ Abstract, Title, Publication Date 표시
☐ PDF 다운로드 링크 제공 (가능한 경우)
☐ 검색 결과 0.5초 이내 반환

Priority: P0 (Must-Have)
Release: V1.0
```

### US-003: 유사 논문 추천
```
AS A 연구원
I WANT TO 현재 읽고 있는 논문과 관련된 다른 논문을 자동 추천받고
SO THAT 관련 연구를 효율적으로 탐색할 수 있다

Acceptance Criteria:
☐ 논문 상세 페이지에서 "유사 논문" 섹션 표시
☐ Top-5 유사 논문 추천
☐ 공통 키워드 하이라이팅
☐ 유사도 점수 시각화 (막대 그래프)
☐ 추천 논문 클릭 시 상세 페이지 이동

Priority: P1 (Should-Have)
Release: V1.0
```

### US-004: PubMed 논문 데이터 수집
```
AS A 시스템
I WANT TO PubMed에서 자동으로 최신 논문 메타데이터를 수집하고
SO THAT 사용자에게 최신 연구 정보를 제공할 수 있다

Acceptance Criteria:
☐ PubMed API를 통한 일일 자동 수집 (UTC 02:00)
☐ 설정된 키워드별 논문 수집
☐ Rate Limit 준수 (10 req/sec)
☐ 필수 필드 수집: PMID, Title, Abstract, Authors, Journal, Date, Keywords, MeSH Terms
☐ 수집 실패 시 재시도 로직 (최대 3회)
☐ 수집 결과 로깅

Priority: P0 (Must-Have)
Release: V1.0
```

### US-005: 연구 트렌드 대시보드
```
AS A R&D 책임자
I WANT TO 내 연구 분야의 최근 트렌드를 한눈에 파악하고
SO THAT 연구 방향 설정에 활용할 수 있다

Acceptance Criteria:
☐ 시계열 키워드 트렌드 차트 (최근 1년)
☐ 핫 키워드 워드클라우드 (월별 업데이트)
☐ 주제별 논문 발행 수 히트맵
☐ 사용자 관심 키워드 설정 가능 (최대 10개)
☐ 데이터 CSV 다운로드 기능

Priority: P1 (Should-Have)
Release: V1.5
```

### US-006: 사용자 인증
```
AS A 사용자
I WANT TO 안전하게 로그인하고 내 정보를 관리하고
SO THAT 개인화된 서비스를 이용할 수 있다

Acceptance Criteria:
☐ 이메일/비밀번호 회원가입
☐ 소셜 로그인 (Google, GitHub)
☐ 비밀번호 찾기/재설정
☐ 프로필 정보 관리 (연구 분야, 관심 키워드)
☐ JWT 토큰 기반 인증
☐ 세션 만료: 24시간

Priority: P0 (Must-Have)
Release: V1.0
```

### US-007: 논문 라이브러리 관리
```
AS A 연구원
I WANT TO 관심 있는 논문을 저장하고 정리하고
SO THAT 나중에 쉽게 참조할 수 있다

Acceptance Criteria:
☐ 논문 저장 (즐겨찾기) 기능
☐ 태그 추가/관리
☐ 메모 작성
☐ 저장된 논문 목록 조회
☐ 검색/필터링 (태그, 날짜)

Priority: P1 (Should-Have)
Release: V1.0
```

### US-008: 논문 비교 기능
```
AS A 연구원
I WANT TO 여러 논문을 동시에 비교하고
SO THAT 연구 방법론이나 결과의 차이점을 파악할 수 있다

Acceptance Criteria:
☐ 2-3편 논문 동시 비교 지원
☐ 주요 정보 나란히 표시 (Abstract, Methods, Results)
☐ 공통 키워드 하이라이팅
☐ AI 기반 차이점 요약
☐ 비교 결과 저장/공유

Priority: P2 (Nice-to-Have)
Release: V1.5
```

---

## 4. User Flows (사용자 플로우)

### 4.1 Flow 1: 첫 사용자 온보딩
```
┌─────────────────┐
│  1. 회원가입     │ ← 이메일/소셜 로그인
│  (이메일/소셜)   │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  2. 연구 분야   │ ← Cancer, Immunology, Genetics, etc.
│     선택        │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  3. 관심 키워드  │ ← 최소 3개 선택
│     설정        │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  4. 튜토리얼    │ ← 3단계, Skip 가능
│  (선택적)       │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  5. 대시보드    │
│     진입        │
└─────────────────┘
```

### 4.2 Flow 2: AI 논문 Q&A
```
┌─────────────────┐
│  1. 챗봇 페이지  │
│     접속        │
└────────┬────────┘
         │
         ▼
┌─────────────────────────────────────────┐
│  2. 질문 입력                           │
│  "CRISPR-Cas9의 off-target 효과를       │
│   줄이는 최신 방법은?"                   │
└────────┬────────────────────────────────┘
         │
         ▼
┌─────────────────────────────────────────┐
│  [시스템 처리]                           │
│  질문 임베딩 → 벡터 검색 → Top-5 청크   │
│  추출 → 프롬프트 생성 → LLM 응답        │
└────────┬────────────────────────────────┘
         │
         ▼
┌─────────────────────────────────────────┐
│  3. AI 응답 표시                         │
│  "최신 연구에 따르면 다음 3가지 방법이    │
│   제시되었습니다..."                     │
│                                         │
│  출처:                                   │
│  [1] PMID:38123456 - "High-fidelity..." │
│  [2] PMID:38234567 - "Machine learning..│
└────────┬────────────────────────────────┘
         │
         ▼
┌─────────────────┐
│  4. 후속 질문   │ ← 대화 히스토리 유지
│  또는 종료      │
└─────────────────┘
```

### 4.3 Flow 3: 논문 검색 → AI 질문
```
┌─────────────────┐
│  1. 검색창에    │
│  쿼리 입력      │
│  "CAR-T cell    │
│   therapy"      │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  2. 검색 결과   │ ← Top-10 논문 표시
│  10건 표시      │   관련도 점수 포함
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  3. 논문 클릭   │
│  → 상세 페이지  │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  4. "AI에게     │ ← 컨텍스트: 현재 논문
│  질문하기" 클릭 │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  5. "이 논문의  │
│  주요 한계는?"  │
│  질문           │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  6. AI 답변     │
│  + 출처 확인    │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  7. 유사 논문   │ ← 연관 연구 탐색
│  추천 클릭      │
└─────────────────┘
```

---

## 5. UI Mockups (UI 목업)

### 5.1 검색 결과 화면
```
┌─────────────────────────────────────────────────────────────┐
│  🔍 [검색어 입력: "암 면역치료의 부작용"______________] [검색] │
├─────────────────────────────────────────────────────────────┤
│  검색 결과: 247건 (0.3초)                                    │
│  정렬: [관련도 ▼] 필터: [연도] [저널] [저자]                  │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  📄 Immune-related adverse events in cancer immunotherapy   │
│     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 94%                 │
│     2024.03 | Nature Medicine | PMID: 38123456              │
│     "Checkpoint inhibitors commonly cause immune-related    │
│      adverse events in approximately 60% of patients..."    │
│     [PDF] [상세보기] [유사 논문] [AI 질문]                    │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  📄 Cytokine release syndrome after CAR-T cell therapy      │
│     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 89%                   │
│     2024.01 | Blood | PMID: 38234567                        │
│     "CAR-T therapy has shown remarkable efficacy in..."     │
│     [PDF] [상세보기] [유사 논문] [AI 질문]                    │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  📄 Management of immunotherapy toxicities: A practical...  │
│     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 85%                      │
│     2023.11 | JAMA Oncology | PMID: 38345678                │
│     ...                                                     │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 5.2 AI 챗봇 화면
```
┌─────────────────────────────────────────────────────────────┐
│  🤖 Bio-RAG AI Assistant                        [새 대화]   │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ 👤 You                                              │   │
│  │ CRISPR-Cas9의 off-target 효과를 줄이는             │   │
│  │ 최신 방법은 무엇인가요?                             │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ 🤖 AI                                               │   │
│  │                                                     │   │
│  │ 최신 연구에 따르면 CRISPR-Cas9의 off-target 효과를  │   │
│  │ 줄이기 위한 주요 방법들이 있습니다:                  │   │
│  │                                                     │   │
│  │ 1. **High-fidelity Cas9 variants**                 │   │
│  │    SpCas9-HF1, eSpCas9 등의 변이체가 개발되어      │   │
│  │    특이성이 크게 향상되었습니다 [PMID: 38123456]    │   │
│  │                                                     │   │
│  │ 2. **Machine learning 기반 가이드 RNA 설계**        │   │
│  │    딥러닝 모델을 활용한 최적 sgRNA 예측으로...     │   │
│  │    [PMID: 38234567]                                │   │
│  │                                                     │   │
│  │ 📚 참고 문헌:                                       │   │
│  │ [1] High-fidelity CRISPR-Cas9... (Nature, 2024)    │   │
│  │ [2] DeepCRISPR: optimized CRISPR... (NBT, 2024)    │   │
│  │                                                     │   │
│  │ 신뢰도: 92%                                         │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│  [메시지 입력...                                    ] [전송] │
└─────────────────────────────────────────────────────────────┘
```

### 5.3 트렌드 대시보드 화면
```
┌─────────────────────────────────────────────────────────────┐
│  📊 연구 트렌드 대시보드                                     │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────────────────┐  ┌───────────────────────┐ │
│  │  📈 키워드 트렌드 (12개월)   │  │  🔥 핫 키워드        │ │
│  │                             │  │                       │ │
│  │      ╱──╲    ╱──            │  │   CAR-T    CRISPR    │ │
│  │  ───╱    ╲──╱               │  │   checkpoint         │ │
│  │  ──────────────             │  │     immunotherapy    │ │
│  │  CAR-T ── CRISPR ── PD-1    │  │   mRNA  gene therapy │ │
│  │                             │  │                       │ │
│  └─────────────────────────────┘  └───────────────────────┘ │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  📊 주제별 논문 발행 히트맵                          │   │
│  │                                                     │   │
│  │        Jan  Feb  Mar  Apr  May  Jun                 │   │
│  │  Cancer  ■■■  ■■   ■■■  ■■■■ ■■■  ■■■■              │   │
│  │  Immuno  ■■   ■■■  ■■   ■■   ■■■  ■■                │   │
│  │  Gene    ■    ■■   ■■■  ■■   ■■   ■■■               │   │
│  │                                                     │   │
│  │  ■ = 논문 수 (진할수록 많음)                         │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ⚙️ 내 관심 키워드: [CAR-T] [CRISPR] [면역치료] [+추가]     │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 6. Information Architecture (정보 구조)

```
홈 (/)
├── 논문 검색 (/search)
│   ├── 의미 검색 (/search?type=semantic)
│   ├── 고급 필터 (/search?filter=advanced)
│   └── 검색 결과 (/search/results)
│
├── AI 챗봇 (/chat)
│   ├── 새 대화 (/chat/new)
│   └── 대화 히스토리 (/chat/history)
│
├── 트렌드 (/trends)
│   ├── 키워드 트렌드 (/trends/keywords)
│   ├── 핫 토픽 (/trends/hot)
│   └── 연구 맵 (/trends/map)
│
├── 내 라이브러리 (/library)
│   ├── 저장한 논문 (/library/papers)
│   ├── 메모 (/library/notes)
│   └── 태그 (/library/tags)
│
├── 논문 상세 (/paper/:pmid)
│   ├── 개요 (기본)
│   ├── 유사 논문 (/paper/:pmid/similar)
│   └── AI 질문 (/paper/:pmid/ask)
│
└── 설정 (/settings)
    ├── 프로필 (/settings/profile)
    ├── 알림 설정 (/settings/notifications)
    └── API 키 관리 (/settings/api)
```

---

## 7. Non-Functional Requirements (비기능 요구사항)

### 7.1 성능
| 항목 | 요구사항 |
|------|----------|
| AI 챗봇 응답 | 평균 2초, 최대 5초 |
| 논문 검색 | 평균 0.5초, 최대 1초 |
| 페이지 로드 | 평균 1초 |
| 동시 사용자 | 500명 지원 |

### 7.2 가용성
| 항목 | 요구사항 |
|------|----------|
| Uptime | 99.5% (월 3.6시간 이내 다운타임) |
| 백업 | 일일 자동 백업, 7일 보관 |
| RTO | 1시간 |
| RPO | 1시간 |

### 7.3 보안
| 항목 | 요구사항 |
|------|----------|
| 인증 | OAuth 2.0, JWT |
| 암호화 | TLS 1.3, AES-256 |
| 개인정보 | GDPR, PIPA 준수 |

### 7.4 사용성
| 항목 | 요구사항 |
|------|----------|
| 학습 시간 | 5분 내 핵심 기능 사용 |
| 브라우저 | Chrome 90+, Firefox 88+, Safari 14+, Edge 90+ |
| 반응형 | 태블릿 최적화 |
| 접근성 | WCAG 2.1 AA 준수 |

---

## 8. Success Metrics (성공 지표)

| KPI | 목표값 | 측정 방법 |
|-----|--------|-----------|
| DAU (일간 활성 사용자) | 500명 (6개월 후) | 로그인 기록 |
| 평균 세션 시간 | 15분 이상 | Google Analytics |
| 질의당 평균 응답 시간 | <2초 | 서버 로그 |
| 사용자 만족도 (NPS) | 40+ | 분기별 설문 |
| 논문 검색 정확도 | 90%+ | A/B 테스트 |
| 추천 클릭률 (CTR) | 25%+ | 클릭 이벤트 추적 |

---

## 9. Out of Scope (V1.0 제외 범위)

다음 기능은 V1.0에서 제외됩니다:
- ❌ 논문 전문 번역
- ❌ 논문 작성 보조 (글쓰기 AI)
- ❌ 실험 데이터 분석
- ❌ Zotero 연동 (V2.0 예정)
- ❌ 동료 평가 시스템
- ❌ 인용 관계 네트워크 시각화 (V2.0 예정)
- ❌ 키워드 알림 (V2.0 예정)

---

## 10. Review & Acceptance Checklist

### 10.1 요구사항 완성도
- [ ] 모든 P0 기능이 명확히 정의되었는가?
- [ ] 각 User Story에 수용 기준이 있는가?
- [ ] 사용자 플로우가 논리적으로 연결되는가?

### 10.2 명확성
- [ ] 모호한 용어가 없는가?
- [ ] 기술적 구현 없이 "무엇을"만 기술했는가?
- [ ] 타겟 사용자가 명확히 정의되었는가?

### 10.3 측정 가능성
- [ ] 성공 지표가 정량적으로 정의되었는가?
- [ ] 각 요구사항이 테스트 가능한가?

### 10.4 Constitution 준수
- [ ] 핵심 가치(정확성, 속도, 신뢰성, 사용성)에 부합하는가?
- [ ] 기술 스택 제약을 준수하는가?

---

## Clarifications (명확화 필요 사항)

> 이 섹션은 `/speckit.clarify` 명령으로 채워집니다.

1. **Q**: 논문 PDF 전문 접근이 필요한 경우, 저작권 처리는 어떻게 하나요?
   **A**: [답변 대기]

2. **Q**: 다국어 지원이 필요한가요? (영어 외 논문)
   **A**: [답변 대기]

3. **Q**: 무료/유료 플랜의 기능 차이는 무엇인가요?
   **A**: [답변 대기]

---

## 변경 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|----------|
| 1.0 | 2024.12 | 초기 Specification 작성 |
